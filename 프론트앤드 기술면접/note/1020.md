### ğŸ“œ í”„ë¡ íŠ¸ì•¤ë“œ ê¸°ìˆ  ë©´ì ‘ íŠ¹ê°•
#### ì˜¤ëŠ˜ ìˆ˜ì—… 
[ìˆ˜ì—…ìë£Œ](https://www.notion.so/FE-055dfe8ec00349aabc6a55a0b45d1eb2)
 - [x] í´ë¡œì ¸
 - [ ] this
---

### ğŸ”¹ ë³µìŠµ_(ì˜ˆì‹œ ë¬¸ì œ í’€ì–´ë³´ê¸°)

####  VO(í•¨ìˆ˜ ì½”ë“œì•ˆì—ì„œ) ì˜ˆì‹œ
```js
var a =  10;  // ê¸€ë¡œë²Œ ì»¨í…ìŠ¤íŠ¸ì˜ ë³€ìˆ˜

(function  ()  {
	var b =  20;  // í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ì˜ ì§€ì—­ ë³€ìˆ˜
})();
 
alert(a);  // ì–´ë–¤ ê°’ì´ ë‚˜ì˜¬ê¹Œìš”?
alert(b);  // ì–´ë–¤ ê°’ì´ ë‚˜ì˜¬ê¹Œìš”?
// b is not defined
```
#### VO(ì§„ì…ë‹¨ê³„ì™€ ì‹¤í–‰ë‹¨ê³„) ì˜ˆì‹œ1
```js
console.log(x); // Function(){}

var x = 10; 

console.log(x); // ? 10

x = 20; 

function x() {}

console.log(x); // ?
```
#### VO(ì§„ì…ë‹¨ê³„ì™€ ì‹¤í–‰ë‹¨ê³„) ì˜ˆì‹œ2
```js
if (true) { 
	var a = 1; 
} else { 
	var b = 2; 
} 
console.log(a); // 1 
console.log(b); // undefined
```
#### VO(ì½œìŠ¤íƒ) ì˜ˆì‹œ1
```js
var a = 10; 
  
function test(x) { 
  var b = 20; 
};
  
test(30);

callStack = {
	1 : { // test()í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ ì¤€ë¹„ë¬¼ ë°ì´í„°ë“¤
		AO : { // ë‚´ìš©ì„ ì ì–´ë³´ì„¸ìš”
			x:30,
			b:  20
		},
		Scope : [AO,VO  ], // ë‚´ìš©ì„ ì ì–´ë³´ì„¸ìš”
		this: ''
	},
	0 : { // ëª¨ë“  í•¨ìˆ˜ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ê¸€ë¡œë²Œ(ì „ì—­)ì˜ ì¤€ë¹„ë¬¼ ë°ì´í„°ë“¤
		VO : {// ë‚´ìš©ì„ ì ì–´ë³´ì„¸ìš”
			a:  10,
			test:funtion(){},
		}, 
		Scope : [VO], // ë‚´ìš©ì„ ì ì–´ë³´ì„¸ìš”
		this: callStack.0.VO 
	}
}
```
#### VO(ì½œìŠ¤íƒ) ì˜ˆì‹œ2
```js
function test(a, b) { 
  var c = 10; 
  function d() {} 
  var e = function _e() {}; 
  (function x() {}); 
}
   
test(10); // call
```
##### ì§„ì… ë‹¨ê³„
```js
callStack = {
	1 : { // test() ìš©
		AO : { // ë‚´ìš©ì„ ì ì–´ë³´ì„¸ìš”
			a: ,
			b: ,
			c : ,
			d:funtion(){},
			e:, // í‘œí˜„í˜• í•¨ìˆ˜ì´ë¯€ë¡œ ì¤€ë¹„ë‹¨ê³„ì—ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
		},
		Scope : [AO,VO], 
		this: ''
	},
	0 : {
		VO : {
			test:funtion(a,b){}
		},
		Scope : [VO], 
		this: callStack.0.VO 
	}
}
```
#### ì‹¤í–‰ë‹¨ê³„
```js
callStack = {
	1 : {
		AO : {// ë‚´ìš©ì„ ì ì–´ë³´ì„¸ìš”
			a:10,
			b: ,
			c :10 ,
			d:funtion(){},
			e: funtion _e(){}
		}, 
		Scope : [AO,VO], 
		this: ''
	},
	0 : {
		VO : {
			test:funtion(a,b){}
		},
		Scope : [VO], 
		this: callStack.0.VO 
	}
}
```

## ğŸ”¸closure
### â—¼ closure?
> mdnì •ì˜
> í´ë¡œì €ëŠ” í•¨ìˆ˜ì™€ ê·¸ í•¨ìˆ˜ê°€ ì„ ì–¸ëì„ ë•Œì˜ ë ‰ì‹œì»¬ í™˜ê²½ê³¼ì˜ ì¡°í•©ì´ë‹¤.

ìì‹ ì´ ìƒì„±ë  ë•Œì˜ í™˜ê²½(Lexicla environment)ì„ ê¸°ì–µí•˜ëŠ” í•¨ìˆ˜ë‹¤.

> ###### [poiemaweb ì°¸ì¡°](https://poiemaweb.com/js-closure)
### â—¼ ì˜ˆì‹œ
#### closureì˜ˆì‹œ1
```js
var data = []  

for (var i =  0; i <  3; i++) {
	data[i] =  function  ()  {
		console.log(i);
	}
}
data[0]()
```
##### closureì‚¬ìš©
```js
callStack = {
	0 : {
		VO : {
			data:[function(){i},function(){i},function(){i},]
		},
		Scope : [], 
		this: callStack.0.VO 
	}
}
```
> let ìœ¼ë¡œ í–ˆì„ ê²½ìš° ì‘ë™ì´ ë˜ëŠ” ì´ìœ ëŠ”?
>  :  ì½”ë“œ ë¸”ë¡ì„ ê¸°ì¤€ìœ¼ë¡œ ì €ì¥ì†Œê°€ ìƒê¸´ë‹¤?
```js
var data = []

for (var i =  0; i <  3; i++) {
	data[i]= (function(h){
		return  function  realDo(){
			console.log(h+2);
		}
	})(i);	
}
  
data[0]() // 2
data[1]() // 3
data[2]() // 4
```
#### closureì˜ˆì‹œ2
```js
function foo() {
  const a = 10;
  const b = 20;
  function bar() {
    debugger;
    const sum = a + a;
		console.log(a)
  }
  return bar;
}
const bar = foo();
bar()
```
```js
// ì½œìŠ¤íƒ 
callStack = {
	1 : { //foo
		AO : {
			a: 10,
			b: 20,
			bar: function() {
				[[call]]:'const sum = a + a;'
			}
		}, // ë‚´ìš©ì„ ì ì–´ë³´ì„¸ìš”
		Scope : [], 
		this: ''
	},
	0 : { // global
		VO : {
			bar: function() {
				[[call]]:'const sum = a + a;'
			}
			foo: function(){
				[[call]]: '....'
			}
		},
		Scope : [VO], 
		this: callStack.0.VO 
	}
}
```
#### closureì˜ˆì‹œ3
```js
let num = 0;
const ì¦ê°€ = function() {
		return num++;
}

console.log(ì¦ê°€()); // 0
console.log(ì¦ê°€()); // 0
console.log(ì¦ê°€()); // 0

// í•´ê²°
const ì¦ê°€ = (function(){
  let num = 0;
  return function () {
		return num++;
  }
})()
 
console.log(ì¦ê°€()); // 1
console.log(ì¦ê°€()); // 2
console.log(ì¦ê°€()); // 3
```

#### í´ë¡œì ¸ ì˜ˆì‹œ4
```js
let buttons = document.querySelectorAll('.buttons > li')
let targets = document.querySelectorAll('.targets > div');
let colorCahrt = ["#DACB0D",'#0DDACB','#0D83DA'] ;

for(var i =  0; i < buttons.length; i++){// í¬ë¬¸ëŒë•Œ ì‹¤í–‰
	buttons[i].onclick = (function(j)  {  // í´ë¦­ë ë•Œ ì‹¤í–‰
		return  function(e){
			if(e.target.classList.contains("on")) {
				e.target.classList =  ""
				targets[j].style.backgroundColor =  ''
			}  else  {
				e.target.classList =  "on"
				targets[j].style.backgroundColor = colorCahrt[j]
			}
		}
	})(i)
}
```
